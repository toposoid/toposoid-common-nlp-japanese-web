'''
  Copyright (C) 2025  Linked Ideal LLC.[https://linked-ideal.com/]
 
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, version 3.
 
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.
 
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
'''

from fastapi.testclient import TestClient
from api import app
from model import SynonymList, FeatureVector
from ToposoidCommon.model import TransversalState
import pytest
import os
from fastapi.encoders import jsonable_encoder

#This is a unit test module
client = TestClient(app)
transversalState = str(jsonable_encoder(TransversalState(userId="test-user", username="guest", roleId=0, csrfToken = "")))

def test_EmptyWord():  
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": ""})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())
    assert synonymList.synonyms == []

def test_SimpleVerb():    
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": "論ずる"})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())
    print(synonymList.synonyms.sort())
    assert synonymList.synonyms.sort() == ['論じる', '論述', '話し合う'].sort()

def test_SimpleNoun():    
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": "映画"})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())
    assert synonymList.synonyms.sort() == ['フィルム'].sort()

def test_VocabularyNotFoundInWordNet():    
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": "確約"})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())
    assert synonymList.synonyms.sort() == ['了承', '承諾', '約束'].sort()

def test_VocabularyNotFoundInWord2Vec():    
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": "秀逸だ"})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())
    assert synonymList.synonyms == []

def test_ChiveModel():    
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": "SEO"})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())
    assert synonymList.synonyms.sort() == ['セスアップ', 'リスティング', '検索エンジン'].sort()


def test_ChikkarSynonym():
    response = client.post("/getSynonyms",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"word": "ケータイ"})    
    assert response.status_code == 200
    synonymList = SynonymList.parse_obj(response.json())    
    assert synonymList.synonyms.sort() == ['mobile', '携帯', '携帯電話', 'モバイル'].sort()
    
def test_getFeatureVector():
    import math
    response = client.post("/getFeatureVector",
                        headers={"Content-Type": "application/json", "X_TOPOSOID_TRANSVERSAL_STATE": transversalState},
                        json={"sentence": "これはテストですよ。"})    
    assert response.status_code == 200
    featureVector = FeatureVector.parse_obj(response.json())
    if os.environ['TOPOSOID_SENTENCEBERT_MODEL_JP'] == "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2":
        correctVector = [0.11278565973043442, 0.41439199447631836, -0.3037640452384949, -0.054304543882608414, 0.06245023384690285, -0.11185586452484131, 0.5146267414093018, 0.0387960784137249, -0.11964543908834457, -0.09259825944900513, 0.15635785460472107, -0.6553782820701599, -0.004797791596502066, 0.1388808786869049, -0.346933513879776, -0.23154209554195404, 0.011978760361671448, -0.36967983841896057, 0.09088843315839767, 0.2552296221256256, 0.493522971868515, 0.008029891178011894, -0.07049628347158432, -0.012411599047482014, -0.15882478654384613, -0.07334205508232117, 0.28148961067199707, 0.0795278325676918, 0.18321578204631805, -0.2145964652299881, -0.192158505320549, -0.0838189423084259, -0.01605088822543621, -0.3024359941482544, 0.1674102544784546, -0.013714100234210491, -0.08433681726455688, -0.08877121657133102, 0.09049775451421738, -0.00046337037929333746, 0.0506000779569149, -0.4661227762699127, 0.07084602117538452, 0.34180447459220886, 0.2991635799407959, 0.39541754126548767, -0.031037762761116028, -0.0935303345322609, -0.03739825263619423, 0.04362259432673454, -0.12734028697013855, -0.3896472454071045, -0.2044910043478012, -0.39742472767829895, 0.16174861788749695, -0.1469392329454422, 0.14017076790332794, -0.004293935839086771, -0.24609576165676117, 0.1051730141043663, 0.13289673626422882, -0.16445156931877136, -0.2635742723941803, 0.29018735885620117, 0.10369053483009338, -0.25155964493751526, 0.08692675083875656, -0.15325626730918884, 0.04157624766230583, 0.3079780042171478, -0.4209780693054199, -0.020185723900794983, 0.021750157698988914, 0.0803896114230156, 0.026983147487044334, 0.45166292786598206, -0.11633634567260742, -0.11859321594238281, 0.1885170340538025, -0.05752743408083916, 0.1731032282114029, 0.03917103260755539, -0.027868198230862617, -0.03465576097369194, 0.3128320276737213, 0.2753579616546631, -0.13890822231769562, 0.3449161946773529, -0.11904887109994888, 0.027363846078515053, 0.2947850227355957, -0.11781866103410721, 0.15735690295696259, 0.1125907227396965, 0.353948712348938, 0.030711138620972633, 0.04498124495148659, -0.2143888920545578, 0.2651039659976959, 0.83623868227005, -0.10994943231344223, 0.026629379019141197, -0.34675607085227966, -0.0686158761382103, 0.00013715215027332306, 0.12435527890920639, -0.17572380602359772, -0.38156428933143616, 0.14881299436092377, -0.1538851261138916, -0.011795188300311565, -0.04023187234997749, 0.09135564416646957, 0.2919345498085022, 0.06315300613641739, -0.14979787170886993, 0.08858317136764526, 0.07892470061779022, -0.055082764476537704, 0.68656325340271, 0.21269077062606812, -0.4363057315349579, 0.19436593353748322, -0.2583276331424713, 0.5138310790061951, -0.6999726295471191, 0.06888336688280106, 0.14556114375591278, 0.09423019737005234, -0.21916885673999786, 0.4268066883087158, 0.20736320316791534, -0.3674708604812622, 0.2902625501155853, -0.2802681028842926, -0.017437374219298363, 0.18657910823822021, 0.3138512372970581, 0.18721903860569, 0.27654483914375305, -0.2980172634124756, 0.3152415454387665, 0.16767019033432007, 0.335844486951828, -0.2768055498600006, -0.06964529305696487, -0.5889192223548889, 0.13459978997707367, 0.17292962968349457, -0.2566312551498413, 0.346661239862442, -0.13390322029590607, 0.05371632054448128, 0.1368667483329773, -0.35472914576530457, -0.2806723415851593, 0.08074039965867996, 0.19906176626682281, 0.10966487973928452, -0.29626405239105225, -0.38493430614471436, 0.23703332245349884, -0.2435845583677292, 0.21386031806468964, 0.3649493157863617, -0.24451828002929688, -0.03945596143603325, -0.07298202067613602, -0.0729999914765358, 0.15274499356746674, 0.7061511874198914, -0.06810928881168365, -0.10050776600837708, -0.2878923714160919, -0.13487429916858673, 0.12582944333553314, -0.041417233645915985, 0.40706586837768555, -0.2695784270763397, 0.0804041177034378, 0.2214682251214981, -0.16176140308380127, -0.044823016971349716, -0.06749343872070312, -0.1350317746400833, 0.1284780502319336, -0.2976321578025818, -0.09528114646673203, 0.11841193586587906, 0.28807446360588074, -0.039475034922361374, -0.03895556181669235, -0.17381437122821808, 0.42097190022468567, -0.31263789534568787, -0.15649285912513733, 0.3540680408477783, -0.12985627353191376, -0.11849554628133774, -0.2642899751663208, -0.13150325417518616, -0.18474994599819183, 0.08638527244329453, -0.25631189346313477, 0.40141716599464417, 0.08849135786294937, 0.2473926544189453, -0.6509702205657959, 0.31066396832466125, 0.05104253068566322, -0.4556894302368164, -0.1519988477230072, -0.20185010135173798, -0.01897672936320305, 0.08236310631036758, -0.20054690539836884, -0.12233958393335342, -0.13411274552345276, -0.022364655509591103, 0.07158804684877396, -0.23592509329319, -0.31141841411590576, 0.20665937662124634, -0.620215892791748, -0.3500767648220062, -0.13181084394454956, -0.040625911206007004, 0.28839775919914246, 0.24937520921230316, -0.28372082114219666, 0.7051567435264587, 0.05615020915865898, 0.06173677742481232, 0.21720372140407562, 0.2037050724029541, -0.3387092053890228, -0.47984468936920166, 0.3562517464160919, -0.12952500581741333, -0.12634186446666718, -0.1791180521249771, -0.0937257707118988, 0.19539940357208252, -0.0422772653400898, -0.00701667508110404, 0.39389416575431824, 0.15408110618591309, 0.30928125977516174, -0.13130371272563934, 0.15693286061286926, -0.3148290812969208, -0.5973447561264038, 0.025083845481276512, 0.011120874434709549, -0.2213357537984848, -0.08941057324409485, 0.10881730169057846, 0.7285277843475342, 0.07962740212678909, -0.004177784081548452, 0.6003431081771851, -0.2342361956834793, -0.0014756893506273627, -0.08188766986131668, -0.014828766696155071, 0.08802015334367752, -0.040141236037015915, 0.1536916047334671, -0.0922597274184227, 0.23512166738510132, 0.10349816828966141, -0.11668816208839417, -0.07503877580165863, 0.18904507160186768, 0.08894229680299759, -0.1578015685081482, 0.028432318940758705, 0.10391929000616074, -0.05611351132392883, 0.05380607023835182, -0.16976559162139893, -0.37874993681907654, -0.04356588050723076, 0.07775814086198807, 0.28126856684684753, -0.20482508838176727, 0.21596203744411469, -0.10789752006530762, 0.0009096010471694171, 0.08970040082931519, -0.20217084884643555, 0.4396161139011383, 0.11080700159072876, 0.030551254749298096, -0.34465956687927246, 0.013970263302326202, 0.049880947917699814, -0.379999041557312, 0.12837333977222443, -0.02683260105550289, -0.29960259795188904, 0.2772023379802704, -0.44816648960113525, -0.04645182192325592, -0.010727599263191223, -0.09514069557189941, 0.14526720345020294, 0.3432563245296478, 0.23962421715259552, -0.05416618660092354, -0.044949278235435486, 0.07254564017057419, -0.053535524755716324, 0.33438706398010254, 0.19908513128757477, 0.0036502026487141848, -0.297419011592865, -0.14601677656173706, 0.1545119434595108, -0.37212851643562317, -0.09616126865148544, -0.15201909840106964, -0.29049867391586304, -0.025860905647277832, -0.025905989110469818, 0.251146137714386, -0.27911749482154846, -0.5049433708190918, -0.07062844187021255, -0.22494278848171234, -0.06990737468004227, 0.45163726806640625, -0.30654188990592957, -0.030230572447180748, -0.06615392118692398, 0.25338348746299744, -0.24649499356746674, 0.24580352008342743, -0.11402004957199097, -0.031281180679798126, 0.07329420745372772, -0.22316746413707733, -0.04488551989197731, -0.10518496483564377, -0.11443483084440231, 0.15220379829406738, -0.11687026172876358, -0.0652225986123085, -0.10624736547470093, -0.29237100481987, 0.07728082686662674, 0.280716210603714, -0.16781629621982574, -0.07840292900800705, 0.24126309156417847, 0.17070001363754272, -0.13392581045627594, 0.2686889171600342, 0.20155352354049683, 0.132932648062706, -0.18898867070674896, -0.26596546173095703, -0.08360010385513306, 0.2282651662826538, 0.17484928667545319, -0.045539721846580505, -0.43362030386924744, -0.17450682818889618, -0.1271907091140747, -0.09144792705774307, -0.1405448168516159, -0.03153778240084648, -0.09690139442682266, -0.16569817066192627, 0.2353072613477707, 0.1891816258430481, 0.17174874246120453, -0.12341713905334473, -0.3595544397830963, 0.25609102845191956, 0.30055350065231323, 0.3907020390033722, 0.27239248156547546, 0.11891061812639236]
    else:
        correctVector = [-0.051550988,-0.07373641,-0.015976155,-0.040822174,-0.1015478,0.042283747,0.07229943,0.056804866,0.13033095,0.09649062,0.21348457,-0.027434742,-0.16873963,-0.09706372,0.07507565,0.10221941,-0.09528532,0.089494266,-0.011908176,0.09944663,-0.10061432,-0.10853494,0.0612786,0.024445899,-0.042772252,-0.029633917,-0.0418275,-0.044847716,0.12641223,-0.05985878,0.16780096,0.0057941065,-0.085185654,0.04647066,0.038325418,-0.077745356,0.08077499,-0.03135845,-0.16722667,0.104563795,0.040641326,0.27847537,0.037979815,-0.057676543,-0.05592781,-0.07789654,0.085448556,-0.16279982,-0.098973475,0.040801376,0.02348283,0.37180266,-0.20161535,0.020943848,0.24625063,0.025025664,-0.052957345,0.10954628,0.13190061,-0.07290907,0.059895415,-0.03209116,0.16815625,0.12810345,-0.179054,-0.04676379,0.2847464,0.028755302,-0.1527834,-0.1211437,0.15551053,0.018608114,-0.08365325,0.12459168,0.016353235,-0.12198323,0.22204922,-0.15045772,0.016019022,-0.1402222,-0.02635564,0.06449568,0.010973261,-0.12720886,-0.21832275,0.15299098,-0.0007111281,0.0094426265,0.0030388276,0.05157293,0.07101554,-0.122998625,0.0138017535,0.024516022,0.0646724,-0.068144344,-0.14532328,-0.043404978,0.18720184,0.0636929,-0.010460984,0.07583501,-0.037217412,0.106860615,-0.011075076,0.07499755,0.10784898,0.102915764,-0.15843754,0.03003187,-0.080408596,0.013792346,0.15289615,-0.11845991,0.09486159,-0.013776724,0.06061015,-0.1893884,-0.00049027894,0.05106001,-0.18010409,0.0006784399,-0.019049967,0.03245582,-0.0033918351,0.05172564,-0.05215606,-0.03824408,0.11795322,-0.0036392321,-0.008561004,-0.09092072,-0.039906066,0.033053204,0.014381374,0.0008107402,-0.0396749,-0.06945708,0.093024634,-0.13951303,0.02885925,0.031885188,0.08903555,-0.025552593,-0.014013414,-0.11154983,-0.038128283,-0.033631455,0.021158071,0.15099715,0.18748052,0.0827056,0.13949932,-0.04823987,-0.05575833,0.08476671,0.03543789,-0.13088451,-0.014914241,-0.09197367,0.08385497,-0.12868392,-0.1471917,0.06756556,0.0788839,0.13009004,-0.07247437,-0.0067523066,-0.043697152,-0.094100215,-0.11302803,0.11313074,0.034371637,0.20048003,0.019577775,0.15129565,0.046060804,-0.16474609,0.010391791,-0.010540615,-0.0057967193,0.09907042,0.15492591,-0.016615473,-0.18378322,0.0620589,-0.075788476,0.009099231,-0.014648493,0.049633175,-0.08221375,0.016887432,0.06230093,0.13854669,0.009846965,-0.1501839,0.033020195,0.013927312,0.030188149,-0.07704086,0.02388235,-0.094524406,0.13735949,-0.007744994,-0.09745267,-0.037705656,0.088995986,0.03968868,0.1127098,0.093697734,0.3302533,0.063783795,-0.065331206,0.12996723,-0.021656575,0.08548018,-0.019478673,-0.017882971,0.026226802,0.14933641,-0.01648589,0.045096055,-0.06094077,0.0022212544,-0.1564595,0.010204618,-0.10746392,0.00051798654,-0.04230095,-0.040320206,-0.029335111,0.01376178,-0.06040113,-0.0036758408,-0.016137945,-0.09668978,0.12120071,0.13646373,0.10144681,-0.13911457,-0.110437304,-0.009916562,-0.103163,0.027880296,-0.06325305,-0.06130824,0.09456476,-0.037534073,-0.07259775,-0.06683008,0.036989804,0.0884647,-0.085272364,0.0826954,0.15696631,-0.061894704,-0.0457065,-0.18409918,0.14963174,-0.17537367,-0.013341819,-0.039660953,-0.056932032,-0.07835678,0.20112054,-0.01063251,0.14955989,-0.16535483,0.108579904,-0.005461058,0.17339033,-0.078161076,-0.047561586,-0.007648055,0.06676059,0.017556133,-0.12878975,0.037689477,-0.12642255,0.05450588,-0.038057063,-0.12213644,-0.06398584,0.06635005,-0.10011765,0.06203368,0.1079919,0.065882765,0.15451258,0.08076247,0.10754832,0.012728249,0.078268185,-0.071087226,0.13535003,-0.070301406,-0.04742327,0.13824844,0.015105739,-0.07971583,-0.022138303,-0.008382867,-0.019485524,-0.028795809,-0.02991686,0.052590754,0.089339904,-0.23998447,0.0412182,0.13970473,-0.044810798,0.08397541,0.02293322,0.21556956,-0.080833204,-0.07841116,-0.012428011,0.035840686,-0.1157634,-0.09518746,-0.10828996,-0.036922544,0.08607837,-0.055511553,-0.046556916,-0.0939709,0.09782749,0.15578587,0.07644898,0.055296462,0.005295752,-0.072983354,0.12066082,0.018367257,-0.10268781,-0.11757805,-0.03359304,0.06468171,-0.1396219,0.03716035,-0.05430125,-0.22531861,-0.03511673,-0.12083059,-0.1371452,0.09015035,-0.18724759,0.10707843,0.009405715,-0.047599345,0.030915394,0.04367136,-0.018429913,-0.10202021,-0.06785267,-0.044601988,-0.033803787,0.13283855,0.10014242,-0.06715255,-0.04052012,-0.017112013,-0.11701223,0.105865635,-0.1380861,0.095299505,-0.0733669,0.06841284,-0.047917947,0.010017057,0.042844802,0.026037866,-0.039283838,0.010408674,0.07372431,0.22092748,0.1288582,-0.09453397,-0.21615674,-0.048338056,0.091325365,-0.3997791,-0.004731513,-0.04310522,-0.05743971,-0.031460494,-0.064845376,-0.028888704,0.0073434697,0.07587904,-0.1143189,-0.11192892,0.0061449423,0.05368705,0.19119282,-0.008253018,0.13721012,0.08467447,-0.015357274,0.13537969,0.012476653,0.12487108,-0.008723787,0.3921307,-0.0020423122,-0.095794626,-0.09261324,0.091045834,-0.10248617,-0.15052526,-0.08835426,-0.0646223,0.122710384,0.043255303,-0.056211907,0.20131393,-0.007223791,-0.201822,0.0059592673,-0.084508814,-0.014454969,0.15330248,-0.081991605,0.03637235,-0.13204437,-0.046028372,-0.15484346,-0.042523537,0.16129859,0.06653125,0.0016881148,-0.07614703,-0.03026145,0.11459896,-0.2902266,-0.21084525,-0.071028195,0.09879106,0.21391332,-0.08891219,0.06728587,0.05006128,0.21461457,0.048865378,-0.1623761,0.07764625,-0.13001,-0.04128078,0.084678374,0.012459167,0.12033161,0.04948278,0.07351402,0.0932334,0.16521788,-0.11215677,0.048781186,-0.1507311,-0.04967192,0.10965639,0.0136350645,0.37791148,-0.1378325,0.0858548,0.024712564,0.02412366,-0.14695306,-0.00186332,-0.005731461,-0.08306644,-0.10316924,0.09988267,-0.060462806,0.1389504,-0.10221657,0.0011413265,-0.051344138,-0.13066584,-0.03917424,-0.0077413344,0.071194954,-0.06688361,0.017782947,9.324029e-05,-0.0044080494,0.037331443,0.119250685,-0.06790305,0.022753907,-0.09469384,-0.007512109,-0.045937683,-0.013536219,-0.019325918,-0.13077575,0.12650663,-0.11888557,0.024685616,-0.0023422092,-0.059463773,0.16330592,0.057821173,-0.002096682,-0.052988794,-0.04719611,0.19850093,0.07223847,-0.06721564,-0.0109953815,-0.18475688,0.04688378,0.013157718,-0.05629601,0.17254095,0.023267785,-0.095870204,-0.10431204,-0.014166788,0.044062853,-0.06312906,0.13233514,-0.01684425,-0.13066743,-0.06655914,0.15949468,0.0145132085,0.047353785,-0.004851188,-0.061652448,0.029075043,-0.023094237,-0.050065607,-0.24672902,0.15074936,-0.016509006,0.094532125,0.04157545,0.10681509,-0.011726077,-0.28198865,-0.027673842,-0.0005288424,0.15448727,0.1382999,0.09677293,0.110359915,-0.024277063,-0.039478872,0.044865564,-0.0064022285,-0.010396141,0.056099255,0.12298122,-0.08132789,0.035564348,-0.13397638,-0.08920858,-0.07493431,0.12116369,-0.1283408,0.04753895,0.058819804,-0.16111268,0.16652079,-0.06509516,-0.06961668,-0.11377213,0.009484984,0.23972361,0.14563097,0.00047084442,-0.040227506,0.06494757,0.1509089,-0.10291079,-0.06208508,-0.075178124,-0.039147448,0.047039617,0.104920864,0.061031323,-0.05332092,0.10016184,-0.095542945,-0.22838058,0.049798,0.080604345,0.022653334,0.17704333,-0.077313066,0.07673277,0.1370931,-0.051172506,-0.13339679,-0.12670276,-0.0829181,-0.08768631,0.09703666,0.12852442,0.07078485,0.08991709,-0.079683326,-0.04462749,0.0018615859,0.02282101,-0.02087844,0.050941635,0.03522442,0.063443206,-0.023486657,-0.030101098,0.11574557,-0.031545844,-0.14690712,0.11719221,-0.054952238,0.038562533,0.012996172,0.04949351,-0.10301846,-0.08309775,-0.11746503,-0.24159212,0.043534685,0.20681101,-0.14307408,0.05147322,-0.002682897,0.065819375,0.25626364,-0.047336627,-0.050827384,0.04046117,0.16977076,0.052435573,-0.0051879357,-0.093023084,0.06904199,-0.15532513,0.02156812,-0.10649177,0.07718056,-0.024311325,0.02341909,0.043619867,0.017877342,-0.08176143,0.025228603,-0.005383447,0.054700583,0.114169665,0.06292235,0.015838286,0.06498583,-0.009214005,-0.07823061,-0.15965576,0.029629305,0.07181859,-0.08928934,-0.029446408,-0.06837559,0.0011449555,-0.15353975,-0.056479633,-0.015336737,-0.05664438,-0.004765645,0.008743325,-0.13999593,0.018948691,0.106603794,0.035864983,-0.07845005,0.11045286,-0.16560356,-0.015263185,0.26951054,-0.097453736,0.047958683,-0.0033391844,0.15485017,0.03980964,0.185576,-0.109470546,0.030566888,-0.11543307,0.11077056,0.032079376,-0.073223144,0.09568631,-0.0063682324,0.14462042,-0.006262291,-0.018955767,-0.11014244,0.008754716,0.076168686,-0.21048152,0.096803755,0.033148583,0.0017101621,0.030247005,0.06720003,0.04712428,0.058008585,-0.013083356,0.006607229,-0.04583016,0.054318517,-0.17131557,0.04551046,-0.14272064,-0.09927542,-0.18357675,-0.13253276,-0.00030602733,0.057113234,0.04446206,-0.009294239,0.0801033,-0.012939728,0.41636696,0.06847908,-0.026911592,0.063594304,0.15173353,0.12151745,-0.035503324,-0.087919615,-0.1004565,0.1318719,0.12831867,0.1990093,0.096272014,0.013527659,-0.05666076,-0.010070833,-0.15022855,0.095303096,0.0009327572,0.03559049,0.16401066,-0.029900216,0.05537894,-0.036175147,0.10855169,0.055384476,0.007907446,-0.014950052,-0.025481895,-0.03776433,-0.050488126,-0.1987735,-0.16327052,-0.13680644,0.2211225,-0.12813419,0.30887648,-0.09653351,-0.0388478,0.12686993,0.006928873,0.03318159,0.004625658,0.12041173,-0.032625664,-0.14690802]
        
    x = False in list(map(lambda x: math.isclose(x[0], x[1], abs_tol=0.00001), zip(featureVector.vector, correctVector)))
    assert not x
